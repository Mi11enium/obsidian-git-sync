# XML - eXtensible Markup Language
## Что такое XML
> [!summary] XML
> XML - это расширяемый язык разметки. XML **предназначен для хранения и передачи структурированных данных**

- **XML** предназначен для передачи данных.
- **Теги XML** не предопределены.
- **XML** описан таким образом, чтобы быть самоопределяемым.
***
## Разница между XML и HTML
XML не является заменой HTML. Они предназначены для решения разных задач:
- XML **решает задачу хранения и транспортировки данных**, фокусируясь на том, что такое эти самые данные
- HTML же **решает задачу отображения данных**, фокусируясь на том, как эти данные выглядят

HTML же решает задачу отображения данных, фокусируясь на том, как эти данные выглядят.
***
## XML ничего не делает
XML ничего не делает. Он был **создан для структурирования, хранения и передачи данных**.
***
## В XML вы изобретаете свои собственные теги
в XML нет предопределенных тегов.
XML позволяет автору определять свои языковые теги и свою структуру документа.
***
## XML – это не замена HTML
XML не является заменой HTML.
В большинстве веб-приложений XML используется для транспортировки данных, а HTML для форматирования и отображения данных.
***
## XML - везде
В настоящее время XML также важен для сети, как когда-то был важен HTML для рождения современного Интернета. XML – это общий инструмент передачи данных между всеми видами приложений.
***
# Как используется XML?
XML используется во многих аспектах веб-разработки, но **основная его задача — облегчение хранения и передачи данных**.

## XML отделяет данные от HTML
Если вам в HTML документе необходимо отображать динамические данные, то это будет занимать слишком много времени, если всякий раз, когда эти данные изменились, редактировать сам HTML документ.

С **XML** данные можно хранить в отдельных файлах XML. При этом вы сосредотачиваетесь на использовании HTML/CSS для отображения и шаблонизации и можете быть уверены, что поступающие новые данные не потребуют каких-либо изменений в коде HTML документа.
***
## XML упрощает распределение данных
В реальном мире компьютерные системы и базы данных используют данные в несовместимых форматах.
XML данные хранятся в простом текстовом формате. Это обеспечивает программную и аппаратную независимость.
Это позволяет легко создавать данные, которые могут использоваться самыми разными приложениями.
***
## XML упрощает передачу данных
Одной из самых время затратных проблем разработчиков всегда была и остается до сих пор проблема обмена данными между несовместимыми между собой системами.

Передача данных в виде XML значительно снижает сложность этой проблемы, так как данные в этом формате могут быть прочитаны разными несовместимыми приложениями.
***
## XML используется для создания новых интернет-языков
С использованием XML было создано множество языков программирования в Интернете.
Вот несколько примеров:

-   XHTML
-   WSDL для описания доступных веб-сервисов
-   WAP и WML как языки разметки для портативных устройств типа КПК
-   RSS языки для новостных каналов
-   RDF и OWL для описания ресурсов и онтологии
-   SMIL для описания мультимедиа для сети


https://msiter.ru/tutorials/uchebnik-xml-dlya-nachinayushchih/kak-ispolzuetsya-xml
***
# Синтаксис XML
## Структура XML файла
Любой XML файл, начинается с объявления декларации.
### Декларация
> <?xml version="1.0" encoding="UTF-8"?>

Если Вы используете **xml version 1.0**, то строку декларации можно не указывать, если Вы используете версию 1.1, то необходимо обязательно указать данную строку.
***
### Элементы xml файла
- В одном файле может содержаться любое количество элементов.
- Имена тегов могут начинаться с **буквы, символа подчеркивания, или знака двоеточие**, затем могут указываться любые символы.
- Одиночный тег может применяться, в ситуации, когда между тегами не содержится какая-либо информация, при этом чтобы не указывать, парный тег и пустоту между ними, используйте одиночный тег, который в любой момент можно будет заменить парным. Одиночный тег обязательно должен быть закрытым!
- При построение XML документа очень **важно соблюдать правильность вложенности тегов**
- XML **регистро-зависимый** язык
***
### Корневой элемент
**Первым** всегда **указывается** **корневой элемент** (root element), в одном XML документе **может быть только один корневой элемент!**

После объявления корневого элемента, Вы можете добавлять любое количество элементов в ваш **XML файл**. Все добавляемые элементы обязательно должны находиться между тегами корневого элемента.
***
### Атрибуты xml файла
- Атрибуты устанавливают в открывающем теге любого элемента.
- Элементы могут содержать атрибуты, а значения атрибутов должны быть заключены в кавычки (одинарные или двойные).
- Атрибутов может быть любое количество, но они не должны повторяться, а их имена не должны содержать пробелов.
- После того, как **XML документ** создан, его необходимо сохранить, при этом не забывайте изменить расширение файла на **.xml**
***
### Сущности
Некоторые символы в XML имеют особые значения.

Если вы поместите, например, символ "<" внутри XML элемента, то будет сгенерирована ошибка, так как парсер интерпретирует его, как начало нового элемента.

![[XML_сущности.png]]

В XML существует 5 предопределенных сущностей:
| Сущность | Символ | Значение    |
| -------- | ------ | ----------- |
| &lt;     | <      | меньше, чем |
| &gt;     | >      | больше, чем |
| &amp;    | &      | амперсанд   |
| &apos;   | '      | апостроф    |
| &quot;   | "      | кавычки            |
***
### Комментарии в XML
Синтаксис комментариев в XML такой же, как и в HTML.

<!-- Это комментарий -->
***
### В XML пробелы сохраняются
В HTML несколько последовательных пробельных символов усекаются до одного. В XML документе все пробельные символы сохраняются.
***
### Синтаксически верный XML документ
Если XML документ составлен в соответствии с приведенными синтаксическими правилами, то говорят, что это "синтаксически верный" XML документ.
***
# XML элементы
XML документ состоит из XML элементов.
## Что такое XML элемент?
XML элемент — это все от (и включая) начального тега элемента до (и включая) конечного тега элемента.

Элемент может содержать:

-   другие элементы
-   текст
-   атрибуты
-   или набор из всего выше названного
***
### Пустые XML элементы
При написании элементов без контента можно использовать альтернативный синтаксис.

Вместо того, чтобы писать пустой элемент в виде:
~~~xml
<book></book>
~~~
Можно написать:
~~~xml
<book />
~~~
***
### Правила написания имен XML
XML элементы должны следовать следующим правилам написания имен:

-   Имена могут содержать буквы, числа и другие символы
-   Имена не могут начинаться с цифры или символа пунктуации
-   Имена не могут начинаться с сочетания "xml" (или XML, или Xml и т.п.)
-   Имена не могут содержать пробельные символы
***
### Хорошая практика составления имен
Старайтесь придумать описательные имена: **<first_name>, <last_name>**.

Имена следует составлять короткие и простые, вроде: **<book_title>**; а не: **<the_title_of_the_book>**.

Избегайте символ "-". Если вы напишите нечто вроде "first-name", то некоторые приложения могут решить, что вы вычитаете имя "name" из имени "first".

Избегайте символ ".". Если вы напишите нечто вроде "first.name", то некоторые приложения могут решить, что "name" это свойство объекта "first".

Избегайте символ ":". Двоеточие зарезервировано для механизма [пространства имен](https://msiter.ru/tutorials/uchebnik-xml-dlya-nachinayushchih/xml-prostranstva-imen).

Не-латинские символы, вроде, _éòá_ вполне легальны в XML, однако, если некое приложение их не поддерживает, то возникнут проблемы.
***
### Стили написания имен
Для XML элементов не существует какого-либо определенного стиля написания имен. Тем не менее, вот несколько наиболее часто используемых стилей:
| Стиль                    | Пример             | Описание                                                         |
| ------------------------ | ------------------ | ---------------------------------------------------------------- |
| Нижний регистр           | &lt;firstname&gt;  | Все буквы в нижнем регистре                                      |
| Верхний регистр          | &lt;FIRSTNAME&gt;  | Все буквы в верхнем регистре                                     |
| С символом подчеркивания | &lt;first_name&gt; | Слова разделяются символом подчеркивания                         |
| В стиле Pascal           | &lt;FirstName&gt;  | Первые буквы всех слов в верхнем регистре                        |
| camelCase                | &lt;firstName&gt;  | Первые буквы всех слов за исключением первого в верхнем регистре |

Если вы выбрали какой-либо стиль написания имен, то **следует последовательно придерживаться его!**

Очень часто XML документ сопровождается соответствующей базой данных. Хорошей практикой является **использование таких же правил написания имен элементов XML документа, что и в соответствующей базе данных.**
***
### Расширяемость XML элементов
Одно из главных достоинств XML состоит в том, что XML документ можно легко расширять не влияя на работу исходного приложения.

Взгляните на следующий пример:
```xml
<note>
	<to>Tove</to>
	<from>Jani</from>
	<body>Не забудь про меня в эти выходные!</body>
</note>
```

Представьте, что автор XML документа добавил некоторую дополнительную информацию:
~~~xml
<note>
	<date>2008-01-10</date>
	<to>Tove</to>
	<from>Jani</from>
	<heading>Напоминание</heading>
	<body>Не забудь про меня в эти выходные!</body>
</note>
~~~

Прервется ли работа нашего приложения?

Нет. Приложение все равно будет способно отыскать элементы ```
```xml
<to>, <from> и <body>
```
и сформировать тот же самый вывод.
***
# XML атрибуты
Как и в HTML, **XML элементы** могут иметь атрибуты. При этом значение _атрибутов в XML_ и правило их создания во многом похожи на [атрибуты в HTML](https://msiter.ru/tutorials/html-nachalnogo-urovnya/tegi-atributy-elementy).

## XML атрибуты
В HTML атрибуты предоставляют некоторую дополнительную информацию об элементе:
~~~html
<img src='computer.gif'>
<a href='demo.asp'>
~~~
Атрибуты часто предоставляют информацию, не являющуюся частью данных. В примере ниже тип файла не зависит от данных, но эта информация может быть важна для приложений, которые будут манипулировать этим элементом:
~~~html
<file type="gif">computer.gif</file>
~~~
***
### XML атрибуты должны заключаться в кавычки
Значение атрибута всегда должно заключаться в кавычки. Это могут быть либо двойные, либо одинарные кавычки. Например, пол персонажа можно записать так:
~~~xml
<person sex="female">
~~~
либо так:
~~~xml
<person sex='female'>
~~~

Если значение атрибута само содержит двойные кавычки, то можно использовать одинарные кавычки. Например:
~~~xml
<gangster name='George "Shotgun" Ziegler'>
~~~
либо использовать символы сущностей:
~~~xml
<gangster name="George &quot;Shotgun&quot; Ziegler">
~~~
***
### XML элементы или атрибуты
**Пример №1**
~~~xml
<person sex="female">
	<firstname>Anna</firstname>
	<lastname>Smith</lastname>
</person>
~~~
**Пример №2**
~~~xml
<person>
	<sex>female</sex>
	<firstname>Anna</firstname>
	<lastname>Smith</lastname>
</person>
~~~

В первом примере пол указан в атрибуте. Во втором, пол записан, как элемент. Оба примера предоставляют одну и ту же информацию.

Нет правил, регулирующих то, когда использовать атрибуты, а когда элементы. **Атрибуты** широко используются в HTML. **В XML**, на мой взгляд, **лучше их избегать, и вместо них использовать элементы.**
***
### Что лучше?
Следующие три XML документа содержат совершенно одинаковую информацию:
**Дата записана, как атрибут**:
~~~xml
<note date="10/01/2008">
	<to>Tove</to>
	<from>Jani</from>
	<heading>Напоминание</heading>
	<body>Не забудь обо мне в эти выходные!</body>
</note>
~~~
**Дата записана, как элемент**:
~~~xml
<note>
	<date>10/01/2008</date>
	<to>Tove</to>
	<from>Jani</from>
	<heading>Напоминание</heading>
	<body>Не забудь обо мне в эти выходные!</body>
</note>
~~~
**Дата записана, как расширенный элемент** (На мой взгляд наилучший вариант):
~~~xml
<note>
	<date>
		<day>10</day>
		<month>01</month>
		<year>2008</year>
	</date>
	<to>Tove</to>
	<from>Jani</from>
	<heading>Напоминание</heading>
	<body>Не забудь обо мне в эти выходные!</body>
</note>
~~~
***
### Избегать ли XML атрибуты?
При использовании атрибутов возникают некоторые проблемы:

-   атрибуты не могут содержать множественные значения (элементы могут)
-   атрибуты не могут содержать древовидные структуры (элементы могут)
-   атрибуты сложно расширять (для будущих изменений)

Атрибуты нелегко читать и обслуживать. Используйте элементы для данных, а атрибуты для информации, не относящейся к данным.

**Никогда не используйте** следующие конструкции:
~~~xml
<note
	day="10" month="01" year="2008"
	to="Tove" from="Jani" heading="Напоминание"
	body="Не забудь обо мне в эти выходные!">
</note>
~~~

### XML атрибуты для метаданных
Иногда элементам присваивают идентификаторы. Эти идентификаторы используются для идентификации XML элементов в точности также, как идентификационные атрибуты в HTML. Следующий пример демонстрирует это:
~~~xml
<messages>
	<note id="501">
		<to>Tove</to>
		<from>Jani</from>
		<heading>Напоминание</heading>
		<body>Не забудь обо мне в эти выходные!</body>
	</note>
	<note id="502">
		<to>Jani</to>
		<from>Tove</from>
		<heading>Re: Напоминание</heading>
		<body>Не забуду</body>
	</note>
</messages>
~~~
В приведенном примере **атрибут id используется для идентификации** разных заметок. Эта **информация не является частью самой заметки**.

Главная мысль всего сказанного это то, что **метаданные (данные о данных) следует записывать, как атрибуты, а сами данные, как элементы**.
***
# XML пространства имен
Пространства имен позволяют избежать конфликта имен XML элементов.
## Конфликты имен
В XML имена элементов определяет разработчик. Часто это становится причиной конфликта имен при попытке одновременного использования нескольких XML документов от разных XML приложений.

Следующий код XML содержит информацию о HTML таблице:
~~~xml
<table>
	<tr>
		<td>Яблоки</td>
		<td>Бананы</td>
	</tr>
</table>
~~~
Следующий код XML содержит информацию о столе (предмет мебели), который по англ. тоже table:
~~~xml
<table>
	<name>Африканский кофейный столик</name>
	<width>80</width>
	<length>120</length>
</table>
~~~
Если эти два фрагмента кода XML будут сведены вместе, то возникнет конфликт имен. Так как оба документа содержат элемент &lt;table&gt;, хотя и с разным контентом и значением.

Пользователь или XML приложение не будут знать, каким образом обрабатывать эти различия.

### Разрешение конфликта имен при помощи префикса
В XML избежать конфликта имен можно при помощи **префикса имени элемента**.

Следующий код XML содержит информацию о таблице HTML и о столе:
~~~xml
<h:table>
	<h:tr>
		<h:td>Яблоки</h:td>
		<h:td>Бананы</h:td>
	</h:tr>
</h:table>

<f:table>
	<f:name>Африканский кофейный столик</f:name>
	<f:width>80</f:width>
	<f:length>120</f:length>
</f:table>
~~~
В этом примере не будет конфликта имен, так как два элемента &lt;table&gt; имеют разные имена.
***
### Пространства имен XML – Атрибут xmlns
При использовании в XML префиксов необходимо определить, так называемое, пространство имен префикса.

_Пространство имен_ определяется благодаря **_атрибуту xmlns_** в начальном теге элемента.

Декларация пространства имен имеет следующий синтаксис - **xmlns:_префикс_="_URI_"**.
~~~xml
<root>
	<h:table xmlns:h="http://www.w3.org/TR/html4/">
		<h:tr>
			<h:td>Яблоки</h:td>
			<h:td>Бананы</h:td>
		</h:tr>
	</h:table>
	<f:table xmlns:f="http://www.w3schools.com/furniture">
		<f:name>Африканский кофейный столик</f:name>
		<f:width>80</f:width>
		<f:length>120</f:length>
	</f:table>
</root>
~~~
В данном примере, атрибут xmlns в теге &lt;table&gt; определяет префиксам h: и f: квалифицирующее пространство имен.

Когда пространство имен определено для какого-то элемента, то все его дочерние элементы с тем же префиксом ассоциируются с его пространством имен.

Пространства имен могут декларироваться либо непосредственно в самом элементе, либо в корневом элементе XML документа:
~~~xml
<root xmlns:h="http://www.w3.org/TR/html4/" xmlns:f="http://www.w3schools.com/furniture">
	<h:table>
		<h:tr>
			<h:td>Яблоки</h:td>
			<h:td>Бананы</h:td>
		</h:tr>
	</h:table>
	<f:table>
		<f:name>Африканский кофейный столик</f:name>
		<f:width>80</f:width>
		<f:length>120</f:length>
	</f:table>
</root>
~~~

Замечание: URI пространства имен не используется парсером для получения какой-либо информации. Цель всего этого состоит в том, чтобы дать пространству имен уникальное имя. Тем не менее, часто компании используют пространство имен, как указатель на веб-страницу с информацией об этом пространстве имен.
***
### Унифицированный идентификатор ресурса (URI)
Унифицированный идентификатор ресурса (URI) это символьная строка, идентифицирующая интернет-ресурс.

В наиболее общей форме URI является единым указателем ресурса (URL), который идентифицирует доменный адрес в интернете. Другой, более частный вид URI — единообразное имя ресурса (URN).

В наших примерах мы будем использовать только URL.
### Пространства имен по умолчанию
Определение пространства имен по умолчанию позволяет избежать использования префиксов во всех дочерних элементах. Такое определение имеет следующий синтаксис:
~~~xml
xmlns="URI пространства имен"
~~~
Следующий код XML содержит информацию о таблице HTML:
~~~xml
<table xmlns="http://www.w3.org/TR/html4/">
	<tr>
		<td>Яблоки</td>
		<td>Бананы</td>
	</tr>
</table>
~~~
Следующий код XML содержит информацию о предмете мебели — столе:
~~~xml
<table xmlns="http://www.w3schools.com/furniture">
	<name>Африканский кофейный столик</name>
	<width>80</width>
	<length>120</length>
</table>
~~~
***
### Реальное использование пространства имен
XSLT — это XML язык, который может использоваться для преобразования документов XML в другие форматы, например, HTML.

В следующем документе XSLT вы можете увидеть, что большинство элементов являются тегами HTML. Те элементы, которые не являются тегами HTML, имеют префикс _xsl_, идентифицированный пространством имен _xmlns:xsl="http://www.w3.org/1999/XSL/Transform"_:
~~~xml
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"> 
	<xsl:template match="/">
		<html>
			<body>
				<h2>Моя коллекция CD</h2>
				<table border="1">
					<tr>
						<th style="text-align:left">Title</th>
						<th style="text-align:left">Artist</th>
					</tr>
					<xsl:for-each select="catalog/cd">
						<tr>
							<td><xsl:value-of select="title"/></td>
							<td><xsl:value-of select="artist"/></td>
						</tr>
					</xsl:for-each>
				</table>
			</body>
		</html>
	</xsl:template>
</xsl:stylesheet>
~~~
***
# Кодировка в XML документе
XML документы могут содержать символы в различных международных кодировках.

Чтобы не возникало ошибок, необходимо указывать, какая кодировка используется в XML документе, либо сохранять файл в универсальной кодировке UTF-8.

## Символьная кодировка
Символьная кодировка определяет уникальный бинарный код для различных символов, используемых в документе.

В компьютерных терминах символьную кодировку также называют символьным набором, символьной раскладкой, кодовым набором и кодом страницы.

### Юникод
Юникод — это **промышленный стандарт для символьной кодировки текстового документа**. Он определяет (почти) все возможные международные символы по именам и числам.

Юникод имеет две разновидности: UTF-8 и UTF-16.

UTF = формат преобразования Юникода (анг. Unicode Transformation Format).

UTF-8 использует один байт (8 бит) для представления общепринятых символов и два (или три) байта для всех остальных символов.

UTF-16 использует два байта (16 бит) для большинства символов и три байта для всего остального.
***
### UTF-8 - Веб-стандарт
UTF-8 — стандартная кодировка символов в сети Интернет.

UTF-8 считается кодировкой по умолчанию в HTML-5, CSS, JavaScript, PHP, SQL и XML.
***
### Кодировка XML документа
Первая строка в XML документе называется прологом:
~~~xml
<?xml version="1.0"?>
~~~
Пролог является необязательным и, как правило, содержит номер версии XML.

Кроме этого, он может содержать информацию о кодировке XML документа. Следующий пролог определяет кодировку UTF-8:
~~~xml
<?xml version="1.0" encoding="UTF-8"?>
~~~

Стандартизация XML устанавливает, что все приложения XML должны понимать кодировки UTF-8 и UTF-16.

UTF-8 является кодировкой по умолчанию для XML документов без информации о кодировке.

Кроме этого, большинство систем приложений XML работают с такими кодировками, как ISO-8859-1, Windows-1252 и ASCII.
***
### Ошибки XML
Очень часто XML документы создаются на одном компьютере, на сервер выгружается с другого, а в браузере отображаются на третьем компьютере.

Если кодировка некорректно интерпретируется всеми тремя компьютерами, то браузер отобразит бессмысленный набор символов, либо вообще выдаст сообщение об ошибке.

Наилучшим выбором в этом случае будет использование кодировки UTF-8. UTF-8 позволяет отображать практически все международные символы, и, кроме этого, она считается кодировкой по умолчанию, если не указана другая кодировка.
***
### Заключение
Когда вы пишите XML документ:

-   Используйте текстовый редактор, который позволяет изменять кодировку документа
-   Убедитесь, что редактор настроен на использование нужной кодировки
-   Опишите используемую кодировку в соответствующей декларации
-   UTF-8 является самой безопасной кодировкой
-   UTF-8 является стандартом в сети Интернет
***
# Просмотр XML файлов
Посмотрите этот XML файл: [note.xml](https://msiter.ru/sites/default/files/msiter_files/note.xml).

XML документ будет отображен с подкрашенными корневым и дочерними элементами. На знак плюс (+) или минус (-) слева от элементов можно нажать, и тогда структура элемента развернется или наоборот свернется. Чтобы просмотреть исходный код XML файла (без знаков + и - ), выберите пункт меню браузера "Исходный код".

Замечание: В браузерах Safari отображается только текст элемента. Чтобы просмотреть код XML документа, необходимо кликнуть правой кнопкой мыши на страницу и выбрать "Просмотреть исходный код".
***
## Просмотр поврежденного XML файла
Если попытаться открыть некорректно составленный XML файл, то некоторые браузеры выдадут сообщение об ошибке, некоторые некорректно его отобразят.

Попробуйте открыть следующий XML файл в браузерах Chrome, IE, Firefox, Opera и Safari : [note_error.xml](https://msiter.ru/sites/default/files/msiter_files/note_error.xml).
***
### Другие примеры XML
Просмотр следующих XML документов поможет вам освоиться с выводом XML.

[XML каталог компакт-дисков (cd_catalog.xml)](https://msiter.ru/sites/default/files/msiter_files/cd_catalog.xml)  
Коллекция CD, сохраненная в виде XML данных.

[XML каталог растений (plant_catalog.xml)](https://msiter.ru/sites/default/files/msiter_files/plant_catalog.xml)  
Каталог растений из магазина растений, сохраненный в виде XML данных.

[Простое меню (simple.xml)](https://msiter.ru/sites/default/files/msiter_files/simple.xml)  
Меню завтрака из ресторана, сохраненное в виде XML данных.
***
### Почему XML отображается таким образом?
XML документы не несут никакой информации о том, каким образом нужно отображать их данные.

В связи с тем, что теги XML "придуманы" автором XML документа, браузеры не знают, что описывает, например, тег &tr;table&gt; - таблицу HTML или же обеденный стол.

Без информации о том, как следует отображать эти данные, большинство браузеров будут отображать XML документ просто как есть.
***
# Отображение XML с CSS
При помощи [CSS (Каскадных таблиц стилей)](https://msiter.ru/tutorials/css-nachalnogo-urovnya "Учебник CSS для начинающих") можно добавить в XML документ информацию о правилах вывода.
## Отображение XML файлов при помощи CSS
При помощи CSS мы можем форматировать вывод XML документов.

Ниже представлен пример того, как использовать стили CSS для форматирования вывода XML документа:

Посмотрите на этот XML файл: [Каталог компакт-дисков (cd_catalog.xml)](https://msiter.ru/sites/default/files/msiter_files/cd_catalog.xml)

Теперь посмотрите на этот файл стилей: [CSS файл (cd_catalog.txt)](https://msiter.ru/sites/default/files/msiter_files/cd_catalog.txt)

И, наконец, посмотрите на: [Каталог компакт-дисков отформатированный при помощи CSS (cd_catalog_with_css.xml)](https://msiter.ru/sites/default/files/msiter_files/cd_catalog_with_css.xml)

Ниже показана часть этого XML файла. Вторая строка подключает к XML файлу CSS файл:

~~~xml
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/css" href="//msiter.ru/cd_catalog.css"?>
<CATALOG>
	<CD>
		<TITLE>Empire Burlesque</TITLE>
		<ARTIST>Bob Dylan</ARTIST>
		<COUNTRY>USA</COUNTRY>
		<COMPANY>Columbia</COMPANY>
		<PRICE>10.90</PRICE>
		<YEAR>1985</YEAR>
	</CD>
	<CD>
		<TITLE>Hide your heart</TITLE>
		<ARTIST>Bonnie Tyler</ARTIST>
		<COUNTRY>UK</COUNTRY>
		<COMPANY>CBS Records</COMPANY>
		<PRICE>9.90</PRICE>
		<YEAR>1988</YEAR>
	</CD>
	...
	...
	...
</CATALOG>
~~~
Форматирование вывода XML при помощи CSS используется довольно редко. Вместо этого W3C **рекомендует использовать XSLT**.
***
# Валидация XML документов
XML документ с корректным синтаксисом называется "правильно сформированным" или "синтаксически верным".

"Валидный" XML документ кроме всего прочего должен соответствовать определенному типу документов.
***
## Синтаксически верные XML документы
XML документ с корректным синтаксисом является "синтаксически верным".

Синтаксические правила были описаны в предыдущих главах:
-   XML документ должен иметь корневой элемент
-   XML элемент должен иметь закрывающий тег
-   XML теги регистрозависимы
-   XML элементы должны соблюдать последовательность вложенности
-   Значения XML атрибутов должны заключаться в кавычки
~~~xml
<?xml version="1.0" encoding="UTF-8"?>
<note>
	<to>Tove</to>
	<from>Jani</from>
	<heading>Напоминание</heading>
	<body>Не забудь про меня в эти выходные!</body>
</note>
~~~
***
### Валидные XML документы
Валидный XML документ не то же самое, что и синтаксически верный XML документ.

**Первое правило** для валидного XML документа то, что он должен быть синтаксически верным.

**Второе правило** — валидный XML документ должен соответствовать определенному типу документов.

Правила, определяющие допустимые элементы и атрибуты для XML документа, часто называются определениями документа или схемами документа.
***
### Когда используют определения документа?
Определения документа — это самый простой способ предоставить рекомендации по допустимым элементам и атрибутам документа.

Определения документа также предоставляют общие рекомендации, которые могут использоваться другими пользователями и/или разработчиками.

Определения документа предоставляют стандартизацию, которая значительно облегчает жизнь.
***
### Когда не используют определения документа?
В действительности XML не требует определений документа.

**Когда вы** экспериментируете с XML или **работаете с небольшими XML файлами**, создание определений документа может стать лишней тратой времени.

Если вы разрабатываете приложения, то подождите до тех пор, пока спецификации не будут стабильными, и только потом добавляйте определения документов. В обратном случае ваше приложение может перестать работать из-за ошибок проверки правильности документа.
***
### Определения документа
С XML можно использовать различные **типы определений документа**:

-   Оригинальное определение типа документа (DTD)
-   Более новый тип определений, основанный на XML, - XML схема. (XSD)
***
### Проверка валидности XML документа
Для проверки валидности XML документов в сети Интернет существует множество программ и сайтов проверки XML документов.
***
### XML ошибки остановят вас
Ошибки в XML документе остановят работу вашего XML приложения.

W3C спецификации XML предписывают, что при возникновении ошибки программа разбора XML документа должна прекратить свою работу. Это сделано для того, чтобы приложения XML были небольшого размера, быстрые и широко совместимые.

HTML браузеры отобразят HTML документ даже с ошибками (например, пропущенный закрывающий тег).

С XML ошибки не допустимы.

![[DTD_vs_XSD.png]]
***
# XML DTD
XML документ с корректной синтаксической структурой является "синтаксически верным".

XML документ, прошедший проверку по DTD, является "синтаксически верным" и "валидным".
***
### Валидные XML документы
"Валидный" XML документ — это "синтаксически верный" XML документ, который также соответствует [правилам DTD](https://msiter.ru/tutorials/uchebnik-xml-dtd "Самоучитель по XML DTD") (определениям типов документов):
~~~xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE note SYSTEM "Note.dtd">
<note>
	<to>Tove</to>
	<from>Jani</from>
	<heading>Напоминание</heading>
	<body>Не забудь обо мне в эти выходные!</body>
</note>
~~~
В приведенном примере, декларация _**DOCTYPE**_ является ссылкой на внешний файл определений типов документа (DTD). Содержимое этого файла показано ниже.
***
### XML DTD
Цель DTD состоит в том, чтобы определить структуру XML документа. Это делается путем определения списка допустимых элементов:
~~~xml
<!DOCTYPE note [
<!ELEMENT note (to,from,heading,body)>
<!ELEMENT to (#PCDATA)>
<!ELEMENT from (#PCDATA)>
<!ELEMENT heading (#PCDATA)>
<!ELEMENT body (#PCDATA)>
]>
~~~
Приведенное выше DTD интерпретируется следующим образом:
-   **!DOCTYPE note** определяет, что корневым элементом документа является _note_
-   **!ELEMENT note** определяет, что элемент _note_ содержит четыре элемента: _to, from, heading, body_
-   **!ELEMENT to** определяет, что элемент _to_ должен быть типа "#PCDATA"
-   **!ELEMENT from** определяет, что элемент _from_ должен быть типа "#PCDATA"
-   **!ELEMENT heading** определяет, что элемент _heading_ должен быть типа "#PCDATA"
-   **!ELEMENT body** определяет, что элемент _body_ должен быть типа  "#PCDATA"

_**#PCDATA**_ означает разбираемые текстовые данные.
***
### Использование DTD для определения сущностей
Определения типов документа (DTD) также можно использовать для декларации специальных символов и символьных строк, используемых в XML документе:
~~~xml
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE note [
<!ENTITY nbsp "&#xA0;">
<!ENTITY writer "Writer: Donald Duck.">
<!ENTITY copyright "Copyright: MSiter.RU.">
]>
<note>
	<to>Tove</to>
	<from>Jani</from>
	<heading>Напоминание</heading>
	<body>Не забудь обо мне в эти выходные!</body>
	<footer>&writer;&nbsp;&copyright;</footer>
</note>
~~~
Сущность состоит из трех частей: амперсанда (&), имени сущности и точки с запятой (;).
***
### Зачем нужно использовать DTD?
С DTD ваш XML файл может нести собственный формат.

С DTD различные, не связанные друг с другом группы людей могут приходить к соглашению о стандартах пересекающихся данных.

С DTD вы можете быть уверены, что получаемые из внешних источников данные будут корректными.
***
### Когда не стоит использовать DTD?
Вообще-то для работы XML не требуется DTD.

Когда вы экспериментируете с XML или работаете с небольшими XML файлами, то создание DTD может оказаться излишней тратой времени.

Если вы разрабатываете приложения, то стоит подождать, пока спецификации не станут стабильными, и только тогда добавлять определения. В обратном случае ваше приложение может перестать работать из-за ошибок валидации.
***
# XML XSD (схемы)
Также, как и [XML DTD](https://msiter.ru/tutorials/uchebnik-xml-dlya-nachinayushchih/xml-dtd "XML DTD"), XML схемы описывают структуру XML документа.

XML документ с корректной синтаксической структурой является "синтаксически верным".

XML документ, прошедший проверку по [XML схеме](https://msiter.ru/tutorials/uchebnik-po-xml-shemam "Учебник по XML схемам"), является "синтаксически верным" и "валидным".
***
### XML схема
XML схема является основанной на XML альтернативой DTD:
~~~xml
<xs:element name="note">
	<xs:complexType>
		<xs:sequence>
			<xs:element name="to" type="xs:string"/>
			<xs:element name="from" type="xs:string"/>
			<xs:element name="heading" type="xs:string"/>
			<xs:element name="body" type="xs:string"/>
		</xs:sequence>
	</xs:complexType>
</xs:element>
~~~
Приведенная выше схема интерпретируется следующим образом:
-   **<xs:element name="note">** определяет элемент "note"
-   **<xs:complexType>** у элемента "note" комплексный тип
-   **<xs:sequence>** комплексный тип — это последовательность элементов
-   **<xs:element name="to" type="xs:string">** у элемента "to" строковый тип (текст)
-   **<xs:element name="from" type="xs:string">** у элемента "from" строковый тип
-   **<xs:element name="heading" type="xs:string">** у элемента "heading" строковый тип
-   **<xs:element name="body" type="xs:string">** у элемента "body" строковый тип

При этом все оформлено как "синтаксически верный" XML.
***
### XML схема мощнее DTD
-   XML схема пишется на XML
-   XML схема легко расширяется
-   XML схема поддерживает типы данных
-   XML схема поддерживает пространства имен
***
### Зачем нужно использовать XML схему?
С XML схемой ваш XML файл может нести собственный формат.

С XML схемой различные, не связанные друг с другом группы людей могут приходить к соглашению о стандартах пересекающихся данных.

С XML схемой вы можете проверять корректность данных.
***
### XML схема поддерживает типы данных
Одним из мощнейших свойств XML схемы является поддержка типов данных:

-   Упрощается описание содержимого документа
-   Упрощается определение ограничений по данным
-   Упрощается проверка корректности данных
-   Упрощается преобразование данных из одного типа в другой
***
### XML схема использует синтаксис XML
Еще одним из больших плюсов XML схемы является то, что она пишется на XML:

-   Вам не нужно изучать новый язык программирования
-   Вы можете использовать тот же XML редактор для создания файлов XML схем
-   Вы можете использовать тот же XML парсер для разбора файлов XML схем
-   Вы можете манипулировать XML схемами при помощи XML DOM
-   Вы можете трансформировать XML схемы при помощи XSLT
***
# XML парсер
Все современные браузеры имеют встроенный XML парсер.

Этот XML парсер преобразует XML документ в объект XML DOM, которым затем можно манипулировать при помощи JavaScript.
***
### Объект XMLHttpRequest
Объект XMLHttpRequest позволяет обмениваться данными в фоновом режиме.

Это настоящая сбывшаяся мечта разработчика, потому что вы можете:

-   Обновлять содержимое веб-страницы не перезагружая веб-страницу
-   Запрашивать данные с сервера, когда веб-страница уже загружена
-   Получать данные с сервера, когда веб-страница уже загружена
-   Посылать данные на сервер в фоновом режиме
***
### Создание объекта XMLHttpRequest
Все современные браузеры (IE7+, Firefox, Chrome, Safari, Opera) уже имеют встроенный объект XMLHttpRequest.

Объект XMLHttpRequest создается следующим образом:
~~~xml
xmlhttp = new XMLHttpRequest();
~~~
### Работа с объектом XMLHttpRequest
Типичный синтаксис JavaScript для работы с объектом XMLHttpRequest выглядит следующим образом:
~~~javascript
var xhttp = new XMLHttpRequest();
xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			// Typical action to be performed when the document is ready:
			document.getElementById("demo").innerHTML = xhttp.responseText;
		} 
	};
xhttp.open("GET", "filename", true);
xhttp.send();
~~~

В строке **var xhttp = new XMLHttpRequest();** создается объект XMLHttpRequest.

В строке **xhttp.onreadystatechange = function()** свойство **onreadystatechange** определяет функцию, которая будет выполняться каждый раз, когда статус объекта XMLHttpRequest изменится.

Строка **if (this.readyState == 4 && this.status == 200)**. Когда свойство **readyState** равно 4, и свойство **status** равно 200, ответ готов.

Свойство **responseText** возвращает ответ сервера в виде текстовой строки.

Эта текстовая строка может использоваться для изменения кода веб-страницы. Строка **document.getElementById("demo").innerHTML = xhttp.responseText;**.